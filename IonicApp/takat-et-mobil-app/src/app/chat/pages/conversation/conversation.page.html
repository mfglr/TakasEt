<ion-header [translucent]="true" class="header">
  <ion-toolbar class="toolbar">

    <ion-buttons slot="start">
      <ion-back-button defaultHref="/chat/create-conversation">
      </ion-back-button>
    </ion-buttons>

    <div class="profile">

      <app-profile-image [diameter]="3" [user]="userState"></app-profile-image>

      <div class="names">
        <span class="user-name">{{userState?.userName | toShortText : 15}}</span>
        <span class="name">{{userState?.fullName | toShortText : 20 | toUpperFirstLetterOfAllWords}}</span>
      </div>

    </div>

  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="content" [scrollEvents]="true" (ionScroll)="onScroll($event)">
  <app-message-box-list [messages]="messages$ | async"></app-message-box-list>
  <div #scrollContainer></div>
</ion-content>

<ion-footer class="footer" scroll>

  <div class="message-input-wrapper">

    <textarea [formControl]="messageInput"></textarea>

    <button class="camera-button" routerLink="/chat/add-photos" [state]="userState">
      <ion-icon name="images-outline" class="camera-icon"></ion-icon>
    </button>


    <button class="plane-button" (click)="sendMessage()">
      <ion-icon name="paper-plane-outline" class="plane-icon"></ion-icon>
    </button>

  </div>
</ion-footer>
